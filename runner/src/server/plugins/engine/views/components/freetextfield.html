{% macro FreeTextField(component) %}
<head>
  <script src="/assets/tinymce.min.js"></script>
  <script type="text/javascript">
    
  tinymce.init({
    setup: function (editor) {
      editor.on('init', function () {               
        setWordCount(editor);
      });
      editor.on('input', function(e) {
        setWordCount(editor);
    });
    },
    selector: '.myeditablediv',  // change this value according to your HTML
    skin: 'tinymce-5',
    branding: false,
    elementpath: false,
    content_css: 'default',
    height: 150,
    menubar: false,
    block_unsupported_drop: true,
    automatic_uploads: false,
    browser_spellcheck: true,
    max_words: Number('{{ component.model.maxwords }}'),
    iframe_aria_text: '{{ component.model.name }}',   
    plugins: [
      'advlist','autolink',
      'lists','link','charmap','preview','anchor','searchreplace',
      'fullscreen','insertdatetime','table','help'

    ],
    toolbar: 'bold | bullist numlist'
  });


  function countWords(editor) {
    debugger;
    var content = editor.getContent({ format: 'text' });
    var wordCount = 0;
    if (content) {
      var matches = content.match(/\b\w+\b/g);
      wordCount = matches ? matches.length : 0;
    }
    return wordCount;
  }

  function setWordCount(editor) {
    debugger;
    var maxWords = editor.getParam('max_words', 500);;
        var wordCount = countWords(editor);
        var wordsRemaing = Number(maxWords) - wordCount;
        var label = document.getElementById('word-count-label-' + editor.id );
        label.innerHTML = 'You have ' + wordsRemaing + ' words remaining';
  }
    </script>
</head>  
<div class="govuk-form-group {{ 'govuk-form-group--error' if component.model.errorMessage }}">
    <label class="govuk-label govuk-label--s" for={{component.model.id}}>{{component.model.label.text}}</label>
    <div id="hint-{{component.model.id}}" class="govuk-hint">{{component.model.hint.html}}</div>
    {% if component.model.errorMessage %}
    <span id="nationality-error" class="govuk-error-message">
        <span class="govuk-visually-hidden">Error:</span> {{component.model.errorMessage.text}}
    </span>
{% endif %}
    <textarea id="{{ component.model.id }}" name="{{ component.model.name }}" class="myeditablediv govuk-textarea">{{ component.model.value }}</textarea>
    <div id="word-count-label-{{ component.model.id }}" class="govuk-hint govuk-character-count__message">You have {{ component.model.maxwords }} words remaining</div>
  </div>
  
{% endmacro %}